var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,HouseholdMemberCreateModal=React.createClass({displayName:"HouseholdMemberCreateModal",getInitialState:function(){return{form:{data:{proVoterId:null,voterId:null,cellphone:"",voterGroup:"",assignedPrecinct:"",precinctNo:"",remarks:"",inputVoterGroup:"KFC"},errors:[]}}},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(e){return{searchText:e.term,provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(e){return{searchText:e.term,municipalityNo:$("#municipality_select2").val(),provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#form-voter-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1e3,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,proId:e.props.proId,electId:e.props.electId,provinceCode:53,municipalityNo:$("#municipality_select2").val(),brgyNo:$("#barangay_select2").val()}},processResults:function(e,t){return{results:e.map(function(e){var t=e.voter_name+" - "+e.precinct_no+" ( "+e.municipality_name+", "+e.barangay_name+" )";return{id:e.pro_voter_id,text:t}})}}}}),$("#relationship_select2").select2({casesentitive:!1,placeholder:"Select relation",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_relationship"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.relationship,text:e.relationship}})}}}}),$("#other_position_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_position"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.position,text:e.position}})}}}}),$("#form-voter-select2").on("change",function(){e.loadVoter(e.props.proId,$(this).val())}),$("#municipality_select2").on("change",function(){e.setFieldValue("municipalityNo",$(this).val())}),$("#barangay_select2").on("change",function(){e.setFieldValue("barangayNo",$(this).val())}),$("#relationship_select2").on("change",function(){e.setFieldValue("relationship",$(this).val())}),$("#other_position_select2").on("change",function(){e.setFieldValue("position",$(this).val())}),$("#municipality_select2").empty().append($("<option/>").val(this.props.municipalityNo).text(this.props.municipalityName)).trigger("change"),$("#barangay_select2").empty().append($("<option/>").val(this.props.barangayNo).text(this.props.barangayName)).trigger("change")},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,proVoterId:t}),type:"GET"}).done(function(e){var t=e.voterName.split(","),o="",r="",l="";t.length>1?(t=t[1].trim().split(" "),l=e.voterName.split(",")[0],r=t.length>1?t[t.length-1]:"",o=e.voterName.split(",")[1].replace(r,"")):(t=e.voterName.trim().split(" "),l=t[0],o=t[1],r=t.length>2?t[2]:"");var n=a.state.form;n.data.proVoterId=e.proVoterId,n.data.cellphone=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,n.data.birthdate=a.isEmpty(e.birthdate)?"":moment(e.birthdate).format("YYYY-MM-DD"),n.data.gender=e.gender,n.data.firstname=a.isEmpty(e.firstname)?o.trim():e.firstname,n.data.middlename=a.isEmpty(e.middlename)?r.trim():e.middlename,n.data.lastname=a.isEmpty(e.lastname)?l.trim():e.lastname,n.data.extName=e.extname,n.data.position=e.position,$("#other_position_select2").empty().append($("<option/>").val(e.position).text(e.position)).trigger("change"),a.setState({form:n})});var o=a.state.form;o.data.proVoterId=null,o.data.voterId=null,o.data.cellphone="",o.data.gender="",o.data.remarks="",o.data.position="",a.setState({form:o})},reset:function(){var e=this.state.form;e.data.proVoterId="",e.data.cellphoneNo="",e.data.firstname="",e.data.lastname="",e.data.middlename="",e.data.extName="",e.data.gender="",e.data.birthdate="",e.data.relationship="",e.data.position="",e.data.remarks="",e.errors=[],$("#form-voter-select2").empty().trigger("change"),$("#relationship_select2").empty().trigger("change"),this.setState({form:e})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFieldValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setNewProfile:function(e){$("#form-voter-select2").empty().append($("<option/>").val(e.proVoterId).text(e.voterName)).trigger("change")},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.householdId=t.props.householdId,a.proId=t.props.proId,a.electId=t.props.electId,a.position=$("#other_position_select2").val(),t.requestAddAttendee=$.ajax({url:Routing.generate("ajax_post_household_detail"),type:"POST",data:a}).done(function(e){t.reset(),t.props.onSuccess(),t.notify("Member has been added.","teal")}).fail(function(e){t.notify("Form Validation Failed.","ruby"),t.setErrors(e.responseJSON)})},closeNewVoterCreateModal:function(){this.setState({showNewVoterCreateModal:!1})},openNewVoterCreateModal:function(){this.setState({showNewVoterCreateModal:!0})},render:function(){var e=this,t=e.state.form.data;return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,bsSize:"lg",backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Member Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showNewVoterCreateModal&&React.createElement(VoterTemporaryCreateModal,{proId:3,electId:3,provinceCode:53,show:this.state.showNewVoterCreateModal,onHide:this.closeNewVoterCreateModal,onSuccess:this.setNewProfile,municipalityNo:this.props.municipalityNo,municipalityName:this.props.municipalityName,barangayNo:this.props.barangayNo,barangayName:this.props.barangayName}),React.createElement("form",{id:"voter-node-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formMunicipalityNo"},React.createElement(ControlLabel,null," Municipality : "),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formBrgyNo"},React.createElement(ControlLabel,null," Barangay : "),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-7"},React.createElement(FormGroup,{controlId:"formProVoterId",validationState:this.getValidationState("voterName")},React.createElement(ControlLabel,null," Voter Name : "),React.createElement("select",{id:"form-voter-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("voterName")))),React.createElement("div",{className:"col-md-3"},React.createElement("button",{style:{marginTop:"25px"},onClick:this.openNewVoterCreateModal,className:"btn btn-primary btn-sm",type:"button"}," New Voter "))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formLastname",validationState:this.getValidationState("lastname")},React.createElement(ControlLabel,null," Apelyido : "),React.createElement("input",{type:"text",value:this.state.form.data.lastname,className:"input-sm form-control",onChange:this.setFormProp,name:"lastname"}),React.createElement(HelpBlock,null,this.getError("lastname")))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formFirstname",validationState:this.getValidationState("firstname")},React.createElement(ControlLabel,null," Pangalan : "),React.createElement("input",{type:"text",value:this.state.form.data.firstname,className:"input-sm form-control",onChange:this.setFormProp,name:"firstname"}),React.createElement(HelpBlock,null,this.getError("firstname")))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formMiddlename",validationState:this.getValidationState("middlename")},React.createElement(ControlLabel,null," Gitnang Pangalan : "),React.createElement("input",{type:"text",value:this.state.form.data.middlename,className:"input-sm form-control",onChange:this.setFormProp,name:"middlename"}),React.createElement(HelpBlock,null,this.getError("middlename")))),React.createElement("div",{className:"col-md-1"},React.createElement(FormGroup,{controlId:"formExtName",validationState:this.getValidationState("extName")},React.createElement(ControlLabel,null," Ext : "),React.createElement("input",{type:"text",value:this.state.form.data.extName,className:"input-sm form-control",onChange:this.setFormProp,name:"extName"}),React.createElement(HelpBlock,null,this.getError("extName"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formBirthdate",validationState:this.getValidationState("birthdate")},React.createElement(ControlLabel,null," Birthdate : "),React.createElement("input",{type:"date",value:this.state.form.data.birthdate,className:"input-sm form-control",onChange:this.setFormProp,name:"birthdate"}),React.createElement(HelpBlock,null,this.getError("birthdate")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formGender",validationState:this.getValidationState("gender")},React.createElement(ControlLabel,null," Gender : "),React.createElement("select",{className:"input-sm form-control",onChange:this.setFormProp,value:t.gender,name:"gender"},React.createElement("option",{value:""},"- Select -"),React.createElement("option",{value:"M"},"Male"),React.createElement("option",{value:"F"},"Female")),React.createElement(HelpBlock,null,this.getError("gender"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formCellphone",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphone,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphone"}),React.createElement(HelpBlock,null,this.getError("cellphone")))),React.createElement("div",{className:"col-md-3"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Barangay Position"),React.createElement("select",{id:"other_position_select2",className:"form-control form-filter input-sm",name:"position"}))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formRelationship",validationState:this.getValidationState("relationship")},React.createElement(ControlLabel,null," Relationship : "),React.createElement("select",{id:"relationship_select2",className:"form-control form-filter input-sm",name:"relationship"}),React.createElement(HelpBlock,null,this.getError("relationship"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement("textarea",{rows:"5",value:this.state.form.data.remarks,className:"input-sm form-control",onChange:this.setFormProp,name:"remarks"}),React.createElement(HelpBlock,null,this.getError("remarks"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",disabled:this.isEmpty(this.state.form.data.proVoterId),type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))}});window.HouseholdMemberCreateModal=HouseholdMemberCreateModal;var HouseholdDetailDatatable=React.createClass({displayName:"HouseholdDetailDatatable",getInitialState:function(){return{target:null,typingTimer:null,doneTypingInterval:1500,showEditModal:!1}},componentDidMount:function(){this.initDatatable(this.props.householdId)},initDatatable:function(e){var t=this,a=(new Datatable,$("#project_recruitment_detail_datatable")),o=new Datatable,r=Routing.generate("ajax_get_datatable_household_detail",{householdId:e},!0);o.init({src:a,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:r,type:"GET",data:function(e){e.provinceCode="53",e.voterName=$('#project_recruitment_detail_datatable input[name="voterName"]').val(),e.barangayName=$('#project_recruitment_detail_datatable input[name="barangayName"]').val(),e.householdId=t.props.householdId}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6]},{className:"align-center",targets:[0,3]}],order:[[1,"desc"]],columns:[{data:null,className:"text-center",width:20,render:function(e,t,a,o){return o.settings._iDisplayStart+o.row+1}},{data:"voter_name",className:"text-left"},{data:"birthdate",className:"text-center",width:100},{data:"relationship",className:"text-center",width:50},{data:"barangay_name",className:"text-center",width:150},{data:"cellphone",className:"text-center",width:100},{width:60,className:"text-center",render:function(e,t,a){return"<a href='javascript:void(0);' class='btn btn-xs font-white bg-red-sunglo delete-button' data-toggle='tooltip' data-title='Delete'><i class='fa fa-trash' ></i></a>"}}]}}),a.on("click",".delete-button",function(){var e=o.getDataTable().row($(this).parents("tr")).data();t.delete(e.id)}),t.grid=o},edit:function(e){this.setState({showEditModal:!0,target:e})},closeEditModal:function(){this.reload(),this.setState({showEditModal:!1,target:null})},delete:function(e){var t=this;confirm("Are you sure you want to remove this member ?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_household_detail",{householdDetailId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){this.grid.getDataTable().ajax.reload()},reloadFiltered:function(e){var t=this;$('#project_recruitment_detail_datatable input[name="assignedPrecinct"]').val(e),setTimeout(function(){t.grid.getDataTable().ajax.reload()})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},render:function(){return React.createElement("div",null,this.state.showEditModal&&React.createElement(VoterEditModal,{show:this.state.showEditModal,onHide:this.closeEditModal,notify:this.props.notify,voterId:this.state.target,proId:this.props.proId}),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"project_recruitment_detail_datatable",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Name"),React.createElement("th",null,"Birthdate"),React.createElement("th",null,"Relationship"),React.createElement("th",null,"Barangay"),React.createElement("th",null,"Cellphone #"),React.createElement("th",null,"Actions")),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voterName",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"birthdate",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"relationship",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangayName",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.HouseholdDetailDatatable=HouseholdDetailDatatable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,HouseholdMemberModal=React.createClass({displayName:"HouseholdMemberModal",getInitialState:function(){return{member:null,showAddMemberModal:!1,header:{householdCode:"",voterName:"",barangayName:"",municipalityName:"",cellphone:"",lgc:{voter_name:""}}}},render:function(){var e=this,t=e.state.header;return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,dialogClassName:"modal-custom-85",enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Household Information : ",t.voterName," | LGC : ",t.lgc.voter_name," | ",""==t.lgc.cellphone?"NO CP":t.lgc.cellphone," ")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showAddMemberModal&&React.createElement(HouseholdMemberCreateModal,{proId:e.props.proId,provinceCode:53,municipalityNo:this.state.header.municipalityNo,municipalityName:this.state.header.municipalityName,barangayNo:this.state.header.barangayNo,barangayName:this.state.header.barangayName,electId:e.props.electId,householdId:this.props.id,show:this.state.showAddMemberModal,notify:this.props.notify,onSuccess:this.reloadDatatable,onHide:this.closeAddMemberModal}),React.createElement("div",{style:{marginBottom:"25px"}},React.createElement("strong",null,"Household # : ")," ",this.state.header.householdCode," ",React.createElement("br",null),React.createElement("strong",null,"Household Leader : ")," ",this.state.header.voterName," ",React.createElement("br",null),React.createElement("strong",null,"Municipality : ")," ",this.state.header.municipalityName," ",React.createElement("br",null),React.createElement("strong",null,"Barangay : "),"  ",this.state.header.barangayName," ",React.createElement("br",null),React.createElement("strong",null,"Cellphone : "),"  ",this.state.header.cellphone),React.createElement("div",{className:"col-md-7",style:{paddingLeft:"0px",marginBottom:"10px"}},React.createElement("button",{onClick:this.openAddMemberModal,type:"button",className:"btn btn-sm btn-primary"},"Add Member")),React.createElement(HouseholdDetailDatatable,{ref:"DetailDatatable",municipalityNo:this.state.header.municipalityNo,municipalityName:this.state.header.municipalityName,barangayNo:this.state.header.barangayNo,barangayName:this.state.header.barangayName,notify:this.props.notify,householdId:this.props.id,electId:e.props.electId,proId:e.props.proId})))},componentDidMount:function(){this.loadHeader(this.props.id)},loadHeader:function(e){var t=this;t.requestRecruiter=$.ajax({url:Routing.generate("ajax_get_household_header",{id:e}),type:"GET"}).done(function(e){t.setState({header:e})})},setFormProp:function(e){this.setState({proIdCode:e.target.value},this.search)},reloadDatatable:function(){this.refs.DetailDatatable.reload()},openAddMemberModal:function(){console.log("showing add member modal"),this.setState({showAddMemberModal:!0})},closeAddMemberModal:function(){this.setState({showAddMemberModal:!1})}});window.HouseholdMemberModal=HouseholdMemberModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,VoterTemporaryCreateModal=React.createClass({displayName:"VoterTemporaryCreateModal",getInitialState:function(){return{form:{data:{proVoterId:null},errors:[]},provinceCode:53}},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},dialogClassName:"modal-custom-85",keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"New Voter Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"new-voter-create-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formMunicipalityNo",validationState:this.getValidationState("municipalityNo")},React.createElement("label",{className:"control-label"},"City/Municipality"),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}),React.createElement(HelpBlock,null,this.getError("municipalityNo")))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formBrgyNo",validationState:this.getValidationState("brgyNo")},React.createElement("label",{className:"control-label"},"Barangay"),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}),React.createElement(HelpBlock,null,this.getError("brgyNo")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formPrecinctNo",validationState:this.getValidationState("precinctNo")},React.createElement(ControlLabel,null," Precinct No : "),React.createElement("input",{type:"text",value:this.state.form.data.precinctNo,className:"input-sm form-control",onChange:this.setFormProp,name:"precinctNo"}),React.createElement(HelpBlock,null,this.getError("precinctNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formLastname",validationState:this.getValidationState("lastname")},React.createElement(ControlLabel,null," Lastname : "),React.createElement("input",{type:"text",value:this.state.form.data.lastname,className:"input-sm form-control",onChange:this.setFormProp,name:"lastname"}),React.createElement(HelpBlock,null,this.getError("lastname")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formFirstname",validationState:this.getValidationState("firstname")},React.createElement(ControlLabel,null," Firstname : "),React.createElement("input",{type:"text",value:this.state.form.data.firstname,className:"input-sm form-control",onChange:this.setFormProp,name:"firstname"}),React.createElement(HelpBlock,null,this.getError("firstname")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formMiddlename",validationState:this.getValidationState("middlename")},React.createElement(ControlLabel,null," Middlename : "),React.createElement("input",{type:"text",value:this.state.form.data.middlename,className:"input-sm form-control",onChange:this.setFormProp,name:"middlename"}),React.createElement(HelpBlock,null,this.getError("middlename")))),React.createElement("div",{className:"col-md-1"},React.createElement(FormGroup,{controlId:"formExtName",validationState:this.getValidationState("extName")},React.createElement(ControlLabel,null," Ext : "),React.createElement("input",{type:"text",value:this.state.form.data.extName,className:"input-sm form-control",onChange:this.setFormProp,name:"extName"}),React.createElement(HelpBlock,null,this.getError("extName"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formGender",validationState:this.getValidationState("gender")},React.createElement(ControlLabel,null," Gender : "),React.createElement("select",{className:"input-sm form-control",onChange:this.setFormProp,name:"gender"},React.createElement("option",{value:""},"- Select -"),React.createElement("option",{value:"M"},"Male"),React.createElement("option",{value:"F"},"Female")),React.createElement(HelpBlock,null,this.getError("gender")))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Civil Status"),React.createElement("select",{id:"civil_status_select2",className:"form-control form-filter input-sm",name:"civilStatus"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Blood Type"),React.createElement("select",{id:"bloodtype_select2",className:"form-control form-filter input-sm",name:"bloodtype"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Occupation"),React.createElement("select",{id:"occupation_select2",className:"form-control form-filter input-sm",name:"occupation"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Religion"),React.createElement("select",{id:"religion_select2",className:"form-control form-filter input-sm",name:"religion"})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Dialect"),React.createElement("select",{id:"dialect_select2",className:"form-control form-filter input-sm",name:"dialect"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Ip Group"),React.createElement("select",{id:"ip_group_select2",className:"form-control form-filter input-sm",name:"ipGroup"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"JPM Position"),React.createElement("select",{id:"voter_group_select2",className:"form-control form-filter input-sm",name:"voterGroup"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Barangay Position"),React.createElement("select",{id:"other_position_select2",className:"form-control form-filter input-sm",name:"voterGroup"})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formCellphoneNo",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphoneNo,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphoneNo"}),React.createElement(HelpBlock,null,this.getError("cellphone")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formBirthdate",validationState:this.getValidationState("birthdate")},React.createElement(ControlLabel,null," Birthdate : "),React.createElement("input",{type:"date",value:this.state.form.data.birthdate,className:"input-sm form-control",onChange:this.setFormProp,name:"birthdate"}),React.createElement(HelpBlock,null,this.getError("birthdate"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",style:{marginRight:"10px"},type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#new-voter-create-form #voter-recruit-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo,brgyNo:e.props.brgyNo}},processResults:function(e,t){return{results:e.map(function(e){var t=e.voter_name+" - "+e.precinct_no+" ( "+e.municipality_name+", "+e.barangay_name+" )";return{id:e.voter_id,text:t}})}}}}),$("#new-voter-create-form #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(t){return{searchText:t.term,provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#new-voter-create-form #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(t){return{searchText:t.term,municipalityNo:$("#new-voter-create-form #municipality_select2").val(),provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#new-voter-create-form #civil_status_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_civil_status"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.civil_status,text:e.civil_status}})}}}}),$("#new-voter-create-form #bloodtype_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_bloodtype"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.bloodtype,text:e.bloodtype}})}}}}),
$("#new-voter-create-form #occupation_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_occupation"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.occupation,text:e.occupation}})}}}}),$("#new-voter-create-form #religion_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_religion"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.religion,text:e.religion}})}}}}),$("#new-voter-create-form #dialect_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_dialect"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.dialect,text:e.dialect}})}}}}),$("#new-voter-create-form #ip_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_ip_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.ip_group,text:e.ip_group}})}}}}),$("#new-voter-create-form #voter_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#new-voter-create-form #other_position_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_position"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.position,text:e.position}})}}}}),$("#new-voter-create-form #civil_status_select2").on("change",function(){console.log("civil status changed"),e.setFormPropValue("civilStatus",$(this).val())}),$("#new-voter-create-form #bloodtype_select2").on("change",function(){e.setFormPropValue("bloodtype",$(this).val())}),$("#new-voter-create-form #occupation_select2").on("change",function(){e.setFormPropValue("occupation",$(this).val())}),$("#new-voter-create-form #religion_select2").on("change",function(){e.setFormPropValue("religion",$(this).val())}),$("#new-voter-create-form #dialect_select2").on("change",function(){e.setFormPropValue("dialect",$(this).val())}),$("#new-voter-create-form #ip_group_select2").on("change",function(){e.setFormPropValue("ipGroup",$(this).val())}),$("#new-voter-create-form #municipality_select2").on("change",function(){e.setFormPropValue("municipalityNo",$(this).val())}),$("#new-voter-create-form #barangay_select2").on("change",function(){e.setFormPropValue("brgyNo",$(this).val())});var t=this.props.municipalityNo,a=this.props.municipalityName,o=this.props.barangayNo,r=this.props.barangayName;null!=t&&($("#new-voter-create-form #municipality_select2").empty().append($("<option/>").val(t).text(a)).trigger("change"),$("#new-voter-create-form #barangay_select2").empty().append($("<option/>").val(o).text(r)).trigger("change"))},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,voterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.nodeLabel=e.voterName,t.data.nodeOrder=10,t.data.municipalityNo=e.municipalityNo,t.data.brgyNo=e.brgyNo,t.data.voterId=e.voterId,t.data.proVoterId=e.proVoterId,t.data.cellphoneNo=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,t.data.voterGroup=a.isEmpty(e.voterGroup)?"KFC":e.voterGroup,t.data.remarks=a.isEmpty(e.remarks)?"":e.remarks,$("#voter-group-select2").empty().append($("<option/>").val(t.data.voterGroup).text(t.data.voterGroup)).trigger("change"),a.setState({form:t})})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value.toUpperCase(),this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.setState({form:e})},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.civilStatus=$("#new-voter-create-form #civil_status_select2").val(),a.bloodtype=$("#new-voter-create-form #bloodtype_select2").val(),a.occupation=$("#new-voter-create-form #occupation_select2").val(),a.religion=$("#new-voter-create-form #religion_select2").val(),a.dialect=$("#new-voter-create-form #dialect_select2").val(),a.ipGroup=$("#new-voter-create-form #ip_group_select2").val(),a.voterGroup=$("#new-voter-create-form #voter_group_select2").val(),a.position=$("#new-voter-create-form #other_position_select2").val(),a.electId=t.props.electId,a.proId=t.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_post_project_temporary_voter"),data:a,type:"POST"}).done(function(e){t.props.onHide(),t.props.onSuccess(e),t.notify("New record has been saved.","teal")}).fail(function(e){t.setErrors(e.responseJSON),t.notify("Form validation failed!.","ruby")})}});window.VoterTemporaryCreateModal=VoterTemporaryCreateModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,HouseholdEditModal=React.createClass({displayName:"HouseholdEditModal",getInitialState:function(){return{form:{data:{electId:null,proVoterId:null},errors:[]},provinceCode:53,showNewVoterCreateModal:!1}},render:function(){var e=this.state.form.data;return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,dialogClassName:"modal-custom-85",enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Household Edit Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"household-edit-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"City/Municipality"),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}),React.createElement(HelpBlock,null,this.getError("municipalityNo")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formBarangay",validationState:this.getValidationState("barangayNo")},React.createElement("label",{className:"control-label"},"Barangay"),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}),React.createElement(HelpBlock,null,this.getError("barangayNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formVoterId",validationState:this.getValidationState("voterId")},React.createElement(ControlLabel,null," Household Leader : "),React.createElement("select",{id:"voter-recruit-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("voterId")))),React.createElement("div",{className:"col-md-1"},React.createElement("button",{style:{marginTop:"25px"},onClick:this.openNewVoterCreateModal,className:"btn btn-primary btn-sm",type:"button"}," New Voter "))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formLastname",validationState:this.getValidationState("lastname")},React.createElement(ControlLabel,null," Apelyido : "),React.createElement("input",{type:"text",value:this.state.form.data.lastname,className:"input-sm form-control",onChange:this.setFormProp,name:"lastname"}),React.createElement(HelpBlock,null,this.getError("lastname")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formFirstname",validationState:this.getValidationState("firstname")},React.createElement(ControlLabel,null," Pangalan : "),React.createElement("input",{type:"text",value:this.state.form.data.firstname,className:"input-sm form-control",onChange:this.setFormProp,name:"firstname"}),React.createElement(HelpBlock,null,this.getError("firstname")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formMiddlename",validationState:this.getValidationState("middlename")},React.createElement(ControlLabel,null," Gitnang Pangalan : "),React.createElement("input",{type:"text",value:this.state.form.data.middlename,className:"input-sm form-control",onChange:this.setFormProp,name:"middlename"}),React.createElement(HelpBlock,null,this.getError("middlename")))),React.createElement("div",{className:"col-md-1"},React.createElement(FormGroup,{controlId:"formExtName",validationState:this.getValidationState("extName")},React.createElement(ControlLabel,null," Ext : "),React.createElement("input",{type:"text",value:this.state.form.data.extName,className:"input-sm form-control",onChange:this.setFormProp,name:"extName"}),React.createElement(HelpBlock,null,this.getError("extName"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formCellphoneNo",validationState:this.getValidationState("cellphoneNo")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphoneNo,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphoneNo"}),React.createElement(HelpBlock,null,this.getError("cellphoneNo")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formBirthdate",validationState:this.getValidationState("birthdate")},React.createElement(ControlLabel,null," Birthdate : "),React.createElement("input",{type:"date",value:this.state.form.data.birthdate,className:"input-sm form-control",onChange:this.setFormProp,name:"birthdate"}),React.createElement(HelpBlock,null,this.getError("birthdate")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formGender",validationState:this.getValidationState("gender")},React.createElement(ControlLabel,null," Kasarian : "),React.createElement("select",{className:"input-sm form-control",onChange:this.setFormProp,value:e.gender,name:"gender"},React.createElement("option",{value:""},"- Select -"),React.createElement("option",{value:"M"},"Male"),React.createElement("option",{value:"F"},"Female")),React.createElement(HelpBlock,null,this.getError("gender"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Civil Status"),React.createElement("select",{id:"civil_status_select2",className:"form-control form-filter input-sm",name:"civilStatus"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Blood Type"),React.createElement("select",{id:"bloodtype_select2",className:"form-control form-filter input-sm",name:"bloodtype"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Occupation"),React.createElement("select",{id:"occupation_select2",className:"form-control form-filter input-sm",name:"occupation"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Ip Group"),React.createElement("select",{id:"ip_group_select2",className:"form-control form-filter input-sm",name:"ipGroup"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Position"),React.createElement("select",{id:"voter_group_select2",className:"form-control form-filter input-sm",name:"voterGroup"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Barangay Position"),React.createElement("select",{id:"other_position_select2",className:"form-control form-filter input-sm",name:"position"})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isTagalog",checked:1==e.isTagalog,onChange:this.setFormCheckProp}),"Is Tagalog",React.createElement("span",null)),React.createElement("br",null),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isCuyonon",checked:1==e.isCuyonon,onChange:this.setFormCheckProp}),"Is Cuyonon",React.createElement("span",null))),React.createElement("div",{className:"col-md-2"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isIlonggo",checked:1==e.isIlonggo,onChange:this.setFormCheckProp}),"Is Ilonggo",React.createElement("span",null)),React.createElement("br",null),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isBisaya",checked:1==e.isBisaya,onChange:this.setFormCheckProp}),"Is Bisaya",React.createElement("span",null))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formDialect",validationState:this.getValidationState("dialect")},React.createElement(ControlLabel,null," Other Dialect : "),React.createElement("select",{id:"dialect_select2",className:"form-control form-filter input-sm",name:"dialect"}),React.createElement(HelpBlock,null,this.getError("dialect"))))),React.createElement("div",{className:"row",style:{marginTop:"15px"}},React.createElement("div",{className:"col-md-2"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isCatholic",checked:1==e.isCatholic,onChange:this.setFormCheckProp}),"Is Catholic",React.createElement("span",null)),React.createElement("br",null),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isInc",checked:1==e.isInc,onChange:this.setFormCheckProp}),"Is INC",React.createElement("span",null))),React.createElement("div",{className:"col-md-2"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isIslam",checked:1==e.isIslam,onChange:this.setFormCheckProp}),"Is Islam",React.createElement("span",null))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formReligion",validationState:this.getValidationState("religion")},React.createElement(ControlLabel,null," Other Religion : "),React.createElement("select",{id:"religion_select2",className:"form-control form-filter input-sm",name:"religion"}),React.createElement(HelpBlock,null,this.getError("religion"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",style:{marginRight:"10px"},disabled:this.isEmpty(this.state.form.data.proVoterId),type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2(),this.loadData(this.props.householdId)},initSelect2:function(){var e=this;$("#household-edit-form #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(t){return{searchText:t.term,provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#household-edit-form #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(t){return{searchText:t.term,municipalityNo:$("#household-edit-form #municipality_select2").val(),provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#household-edit-form #voter-recruit-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:$("#household-edit-form #municipality_select2").val(),brgyNo:e.props.brgyNo}},processResults:function(e,t){var a=1==e.has_id?"YES":"NO";return{results:e.map(function(e){var t=e.voter_name+" ( "+e.municipality_name+", "+e.barangay_name+" ) - ID : "+a;return{id:e.pro_voter_id,text:t}})}}}}),$("#household-edit-form #civil_status_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_civil_status"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.civil_status,text:e.civil_status}})}}}}),$("#household-edit-form #bloodtype_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_bloodtype"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.bloodtype,text:e.bloodtype}})}}}}),$("#household-edit-form #occupation_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_occupation"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.occupation,text:e.occupation}})}}}}),$("#household-edit-form #religion_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_religion"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.religion,text:e.religion}})}}}}),$("#household-edit-form #dialect_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_dialect"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.dialect,text:e.dialect}})}}}}),$("#household-edit-form #ip_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_ip_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.ip_group,text:e.ip_group}})}}}}),$("#household-edit-form #voter_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#household-edit-form #other_position_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_position"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.position,text:e.position}})}}}}),$("#form-voter-select2").on("change",function(){e.loadVoter(e.props.proId,$(this).val())}),$("#household-edit-form #civil_status_select2").on("change",function(){console.log("civil status changed"),e.setFormPropValue("civilStatus",$(this).val())}),$("#household-edit-form #bloodtype_select2").on("change",function(){e.setFormPropValue("bloodtype",$(this).val())}),$("#household-edit-form #occupation_select2").on("change",function(){e.setFormPropValue("occupation",$(this).val())}),$("#household-edit-form #religion_select2").on("change",function(){e.setFormPropValue("religion",$(this).val())}),$("#household-edit-form #dialect_select2").on("change",function(){e.setFormPropValue("dialect",$(this).val())}),$("#household-edit-form #ip_group_select2").on("change",function(){e.setFormPropValue("ipGroup",$(this).val())}),$("#household-edit-form #voter_group_select2").on("change",function(){e.setFormPropValue("voterGroup",$(this).val())}),$("#household-edit-form #municipality_select2").on("change",function(){e.setFormPropValue("municipalityNo",$(this).val())}),$("#household-edit-form #barangay_select2").on("change",function(){e.setFormPropValue("barangayNo",$(this).val())}),$("#household-edit-form #other_position_select2").on("change",function(){e.setFormPropValue("position",$(this).val())}),$("#household-edit-form #voter-recruit-select2").on("change",function(){e.loadVoter(3,$(this).val())})},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,proVoterId:t}),type:"GET"}).done(function(e){var t=e.voterName.split(","),o="",r="",l="";t.length>1?(t=t[1].trim().split(" "),l=e.voterName.split(",")[0],r=t.length>1?t[t.length-1]:"",o=e.voterName.split(",")[1].replace(r,"")):(t=e.voterName.trim().split(" "),l=t[0],o=t[1],r=t.length>2?t[2]:"");var n=a.state.form;n.data.proVoterId=e.proVoterId,n.data.cellphoneNo=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,n.data.birthdate=a.isEmpty(e.birthdate)?"":moment(e.birthdate).format("YYYY-MM-DD"),n.data.gender=e.gender,n.data.firstname=a.isEmpty(e.firstname)?o.trim():e.firstname,n.data.middlename=a.isEmpty(e.middlename)?r.trim():e.middlename,n.data.lastname=a.isEmpty(e.lastname)?l.trim():e.lastname,n.data.extName=e.extName,n.data.civilStatus=e.civilStatus,n.data.bloodtype=e.bloodtype,n.data.occupation=e.occupation,n.data.religion=e.religion,n.data.dialect=e.dialect,n.data.ipGroup=e.ipGroup,n.data.position=e.position,n.data.isTagalog=a.isEmpty(e.isTagalog)?0:e.isTagalog,n.data.isCuyonon=a.isEmpty(e.isCuyonon)?0:e.isCuyonon,n.data.isBisaya=a.isEmpty(e.isBisaya)?0:e.isBisaya,n.data.isIlonggo=a.isEmpty(e.isIlonggo)?0:e.isIlonggo,n.data.isCatholic=a.isEmpty(e.isCatholic)?0:e.isCatholic,n.data.isInc=a.isEmpty(e.isInc)?0:e.isInc,n.data.isIslam=a.isEmpty(e.isIslam)?0:e.isIslam,$("#household-edit-form #civil_status_select2").empty().append($("<option/>").val(e.civilStatus).text(e.civilStatus)).trigger("change"),$("#household-edit-form #bloodtype_select2").empty().append($("<option/>").val(e.bloodtype).text(e.bloodtype)).trigger("change"),$("#household-edit-form #occupation_select2").empty().append($("<option/>").val(e.occupation).text(e.occupation)).trigger("change"),$("#household-edit-form #religion_select2").empty().append($("<option/>").val(e.religion).text(e.religion)).trigger("change"),$("#household-edit-form #dialect_select2").empty().append($("<option/>").val(e.dialect).text(e.dialect)).trigger("change"),$("#household-edit-form #ip_group_select2").empty().append($("<option/>").val(e.ipGroup).text(e.ipGroup)).trigger("change"),$("#household-edit-form #voter_group_select2").empty().append($("<option/>").val(e.voterGroup).text(e.voterGroup)).trigger("change"),$("#household-edit-form #other_position_select2").empty().append($("<option/>").val(e.position).text(e.position)).trigger("change"),a.setState({form:n})});var o=a.state.form;o.data.proVoterId=null,o.data.voterId=null,o.data.cellphone="",o.data.gender="",o.data.remarks="",a.setState({form:o})},loadData:function(e){var t=this;t.requestVoter=$.ajax({url:Routing.generate("ajax_get_household_header_full",{id:e}),type:"GET"}).done(function(e){var a=t.state.form;a.data.proVoterId=e.pro_voter_id,a.data.cellphoneNo=t.isEmpty(e.cellphone)?"":e.cellphone,a.data.birthdate=t.isEmpty(e.birthdate)?"":moment(e.birthdate).format("YYYY-MM-DD"),a.data.gender=e.gender,a.data.firstname=t.isEmpty(e.firstname)?firstname.trim():e.firstname,a.data.middlename=t.isEmpty(e.middlename)?middlename.trim():e.middlename,a.data.lastname=t.isEmpty(e.lastname)?lastname.trim():e.lastname,a.data.extName=e.ext_name,a.data.civilStatus=e.civil_status,a.data.bloodtype=e.bloodtype,a.data.occupation=e.occupation,a.data.religion=e.religion,a.data.dialect=e.dialect,a.data.ipGroup=e.ip_group,a.data.municipalityName=e.municipality_name,a.data.municipalityNo=e.municipality_no,a.data.barangayName=e.barangay_name,a.data.barangayNo=e.barangay_no,a.data.voterName=e.voter_name,a.data.voterGroup=e.voter_group,t.setState({form:a},t.reinitSelect2)})},reinitSelect2:function(){var e=this.state.form.data;$("#household-edit-form #voter-recruit-select2").empty().append($("<option/>").val(e.proVoterId).text(e.voterName)).trigger("change"),$("#household-edit-form #municipality_select2").empty().append($("<option/>").val(e.municipalityNo).text(e.municipalityName)).trigger("change"),$("#household-edit-form #barangay_select2").empty().append($("<option/>").val(e.barangayNo).text(e.barangayName)).trigger("change"),$("#household-edit-form #civil_status_select2").empty().append($("<option/>").val(e.civilStatus).text(e.civilStatus)).trigger("change"),$("#household-edit-form #bloodtype_select2").empty().append($("<option/>").val(e.bloodtype).text(e.bloodtype)).trigger("change"),$("#household-edit-form #occupation_select2").empty().append($("<option/>").val(e.occupation).text(e.occupation)).trigger("change"),$("#household-edit-form #religion_select2").empty().append($("<option/>").val(e.religion).text(e.religion)).trigger("change"),$("#household-edit-form #dialect_select2").empty().append($("<option/>").val(e.dialect).text(e.dialect)).trigger("change"),$("#household-edit-form #ip_group_select2").empty().append($("<option/>").val(e.ipGroup).text(e.ipGroup)).trigger("change"),$("#household-edit-form #voter_group_select2").empty().append($("<option/>").val(e.voterGroup).text(e.voterGroup)).trigger("change")},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFormCheckProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.setState({form:e})},closeNewVoterCreateModal:function(){this.setState({showNewVoterCreateModal:!1})},openNewVoterCreateModal:function(){console.log("opening modal"),this.setState({showNewVoterCreateModal:!0})},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=t.props.proId,a.electId=t.props.electId,a.position=$("#household-edit-form #other_position_select2").val(),t.requestPost=$.ajax({url:Routing.generate("ajax_patch_household_header",{householdId:this.props.householdId}),data:a,type:"PATCH"}).done(function(e){t.reset(),t.props.reload(),t.props.onHide(),t.notify("Household has been updated.","teal")}).fail(function(e){t.setErrors(e.responseJSON),t.notify("Validation failed !","ruby")})}});window.HouseholdEditModal=HouseholdEditModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,HouseholdCreateModal=React.createClass({displayName:"HouseholdCreateModal",getInitialState:function(){return{form:{data:{electId:3,proVoterId:null,isTagalog:0,isBisaya:0,isCuyonon:0,isIlonggo:0,isCatholic:0,isInc:0,isIslam:0},errors:[]},provinceCode:53,showNewVoterCreateModal:!1}},render:function(){var e=this.state.form.data;return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,dialogClassName:"modal-custom-85",enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Household Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showNewVoterCreateModal&&React.createElement(VoterTemporaryCreateModal,{proId:this.props.proId,electId:this.props.electId,provinceCode:this.props.provinceCode,show:this.state.showNewVoterCreateModal,notify:this.props.notify,onHide:this.closeNewVoterCreateModal}),React.createElement("form",{id:"household-create-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"City/Municipality"),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}),React.createElement(HelpBlock,null,this.getError("municipalityNo")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formBarangay",validationState:this.getValidationState("barangayNo")},React.createElement("label",{className:"control-label"},"Barangay"),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",
name:"brgyNo"}),React.createElement(HelpBlock,null,this.getError("barangayNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formVoterName",validationState:this.getValidationState("voterName")},React.createElement(ControlLabel,null," Household Leader : "),React.createElement("select",{id:"voter-recruit-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("voterName")))),React.createElement("div",{className:"col-md-3"},React.createElement("button",{style:{marginTop:"25px"},onClick:this.openNewVoterCreateModal,className:"btn btn-primary btn-sm",type:"button"}," New Voter "))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formLastname",validationState:this.getValidationState("lastname")},React.createElement(ControlLabel,null," Apelyido : "),React.createElement("input",{type:"text",value:this.state.form.data.lastname,className:"input-sm form-control",onChange:this.setFormProp,name:"lastname"}),React.createElement(HelpBlock,null,this.getError("lastname")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formFirstname",validationState:this.getValidationState("firstname")},React.createElement(ControlLabel,null," Pangalan : "),React.createElement("input",{type:"text",value:this.state.form.data.firstname,className:"input-sm form-control",onChange:this.setFormProp,name:"firstname"}),React.createElement(HelpBlock,null,this.getError("firstname")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formMiddlename",validationState:this.getValidationState("middlename")},React.createElement(ControlLabel,null," Gitnang Pangalan : "),React.createElement("input",{type:"text",value:this.state.form.data.middlename,className:"input-sm form-control",onChange:this.setFormProp,name:"middlename"}),React.createElement(HelpBlock,null,this.getError("middlename")))),React.createElement("div",{className:"col-md-1"},React.createElement(FormGroup,{controlId:"formExtName",validationState:this.getValidationState("extName")},React.createElement(ControlLabel,null," Ext : "),React.createElement("input",{type:"text",value:this.state.form.data.extName,className:"input-sm form-control",onChange:this.setFormProp,name:"extName"}),React.createElement(HelpBlock,null,this.getError("extName"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formCellphoneNo",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphoneNo,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphoneNo"}),React.createElement(HelpBlock,null,this.getError("cellphone")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formBirthdate",validationState:this.getValidationState("birthdate")},React.createElement(ControlLabel,null," Birthdate : "),React.createElement("input",{type:"date",value:this.state.form.data.birthdate,className:"input-sm form-control",onChange:this.setFormProp,name:"birthdate"}),React.createElement(HelpBlock,null,this.getError("birthdate")))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formGender",validationState:this.getValidationState("gender")},React.createElement(ControlLabel,null," Kasarian : "),React.createElement("select",{className:"input-sm form-control",onChange:this.setFormProp,value:e.gender,name:"gender"},React.createElement("option",{value:""},"- Select -"),React.createElement("option",{value:"M"},"Male"),React.createElement("option",{value:"F"},"Female")),React.createElement(HelpBlock,null,this.getError("gender"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Civil Status"),React.createElement("select",{id:"civil_status_select2",className:"form-control form-filter input-sm",name:"civilStatus"}))),React.createElement("div",{className:"col-md-1"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Blood"),React.createElement("select",{id:"bloodtype_select2",className:"form-control form-filter input-sm",name:"bloodtype"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Occupation"),React.createElement("select",{id:"occupation_select2",className:"form-control form-filter input-sm",name:"occupation"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Ip Group"),React.createElement("select",{id:"ip_group_select2",className:"form-control form-filter input-sm",name:"ipGroup"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"JPM Position"),React.createElement("select",{id:"voter_group_select2",className:"form-control form-filter input-sm",name:"voterGroup"}))),React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Barangay Position"),React.createElement("select",{id:"other_position_select2",className:"form-control form-filter input-sm",name:"position"})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-2"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isTagalog",checked:1==e.isTagalog,onChange:this.setFormCheckProp}),"Is Tagalog",React.createElement("span",null)),React.createElement("br",null),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isCuyonon",checked:1==e.isCuyonon,onChange:this.setFormCheckProp}),"Is Cuyonon",React.createElement("span",null))),React.createElement("div",{className:"col-md-2"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isIlonggo",checked:1==e.isIlonggo,onChange:this.setFormCheckProp}),"Is Ilonggo",React.createElement("span",null)),React.createElement("br",null),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isBisaya",checked:1==e.isBisaya,onChange:this.setFormCheckProp}),"Is Bisaya",React.createElement("span",null))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formDialect",validationState:this.getValidationState("dialect")},React.createElement(ControlLabel,null," Other Dialect : "),React.createElement("select",{id:"dialect_select2",className:"form-control form-filter input-sm",name:"dialect"}),React.createElement(HelpBlock,null,this.getError("dialect"))))),React.createElement("div",{className:"row",style:{marginTop:"15px"}},React.createElement("div",{className:"col-md-2"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isCatholic",checked:1==e.isCatholic,onChange:this.setFormCheckProp}),"Is Catholic",React.createElement("span",null)),React.createElement("br",null),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isInc",checked:1==e.isInc,onChange:this.setFormCheckProp}),"Is INC",React.createElement("span",null))),React.createElement("div",{className:"col-md-2"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isIslam",checked:1==e.isIslam,onChange:this.setFormCheckProp}),"Is Islam",React.createElement("span",null))),React.createElement("div",{className:"col-md-2"},React.createElement(FormGroup,{controlId:"formReligion",validationState:this.getValidationState("religion")},React.createElement(ControlLabel,null," Other Religion : "),React.createElement("select",{id:"religion_select2",className:"form-control form-filter input-sm",name:"religion"}),React.createElement(HelpBlock,null,this.getError("religion"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",style:{marginRight:"10px"},type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#household-create-form #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(t){return{searchText:t.term,provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#household-create-form #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(t){return{searchText:t.term,municipalityNo:$("#household-create-form #municipality_select2").val(),provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#household-create-form #voter-recruit-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:$("#household-create-form #municipality_select2").val(),brgyNo:e.props.brgyNo}},processResults:function(e,t){return{results:e.map(function(e){var t=1==parseInt(e.has_id)?"YES":"NO",a=e.voter_name+" ( "+e.municipality_name+", "+e.barangay_name+" ) - ID : "+t;return{id:e.pro_voter_id,text:a}})}}}}),$("#household-create-form #civil_status_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_civil_status"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.civil_status,text:e.civil_status}})}}}}),$("#household-create-form #bloodtype_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_bloodtype"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.bloodtype,text:e.bloodtype}})}}}}),$("#household-create-form #occupation_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_occupation"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.occupation,text:e.occupation}})}}}}),$("#household-create-form #religion_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_religion"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.religion,text:e.religion}})}}}}),$("#household-create-form #dialect_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_dialect"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.dialect,text:e.dialect}})}}}}),$("#household-create-form #ip_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_ip_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.ip_group,text:e.ip_group}})}}}}),$("#household-create-form #voter_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#household-create-form #other_position_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_position"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.position,text:e.position}})}}}}),$("#form-voter-select2").on("change",function(){e.loadVoter(e.props.proId,$(this).val())}),$("#household-create-form #civil_status_select2").on("change",function(){console.log("civil status changed"),e.setFormPropValue("civilStatus",$(this).val())}),$("#household-create-form #bloodtype_select2").on("change",function(){e.setFormPropValue("bloodtype",$(this).val())}),$("#household-create-form #occupation_select2").on("change",function(){e.setFormPropValue("occupation",$(this).val())}),$("#household-create-form #religion_select2").on("change",function(){e.setFormPropValue("religion",$(this).val())}),$("#household-create-form #dialect_select2").on("change",function(){e.setFormPropValue("dialect",$(this).val())}),$("#household-create-form #ip_group_select2").on("change",function(){e.setFormPropValue("ipGroup",$(this).val())}),$("#household-create-form #voter_group_select2").on("change",function(){e.setFormPropValue("voterGroup",$(this).val())}),$("#household-create-form #other_position_select2").on("change",function(){e.setFormPropValue("position",$(this).val())}),$("#household-create-form #municipality_select2").on("change",function(){e.setFormPropValue("municipalityNo",$(this).val())}),$("#household-create-form #barangay_select2").on("change",function(){e.setFormPropValue("barangayNo",$(this).val())}),$("#household-create-form #voter-recruit-select2").on("change",function(){e.loadVoter(3,$(this).val())})},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,proVoterId:t}),type:"GET"}).done(function(e){var t=e.voterName.split(","),o="",r="",l="";t.length>1?(t=t[1].trim().split(" "),l=e.voterName.split(",")[0],r=t.length>1?t[t.length-1]:"",o=e.voterName.split(",")[1].replace(r,"")):(t=e.voterName.trim().split(" "),l=t[0],o=t[1],r=t.length>2?t[2]:"");var n=a.state.form;n.data.proVoterId=e.proVoterId,n.data.cellphoneNo=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,n.data.birthdate=a.isEmpty(e.birthdate)?"":moment(e.birthdate).format("YYYY-MM-DD"),n.data.gender=e.gender,n.data.firstname=a.isEmpty(e.firstname)?o.trim():e.firstname,n.data.middlename=a.isEmpty(e.middlename)?r.trim():e.middlename,n.data.lastname=a.isEmpty(e.lastname)?l.trim():e.lastname,n.data.extName=e.extname,n.data.civilStatus=e.civilStatus,n.data.bloodtype=e.bloodtype,n.data.occupation=e.occupation,n.data.religion=e.religion,n.data.dialect=e.dialect,n.data.ipGroup=e.ipGroup,n.data.isTagalog=a.isEmpty(e.isTagalog)?0:e.isTagalog,n.data.isCuyonon=a.isEmpty(e.isCuyonon)?0:e.isCuyonon,n.data.isBisaya=a.isEmpty(e.isBisaya)?0:e.isBisaya,n.data.isIlonggo=a.isEmpty(e.isIlonggo)?0:e.isIlonggo,n.data.isCatholic=a.isEmpty(e.isCatholic)?0:e.isCatholic,n.data.isInc=a.isEmpty(e.isInc)?0:e.isInc,n.data.isIslam=a.isEmpty(e.isIslam)?0:e.isIslam,n.data.position=e.position,$("#household-create-form #civil_status_select2").empty().append($("<option/>").val(e.civilStatus).text(e.civilStatus)).trigger("change"),$("#household-create-form #bloodtype_select2").empty().append($("<option/>").val(e.bloodtype).text(e.bloodtype)).trigger("change"),$("#household-create-form #occupation_select2").empty().append($("<option/>").val(e.occupation).text(e.occupation)).trigger("change"),$("#household-create-form #religion_select2").empty().append($("<option/>").val(e.religion).text(e.religion)).trigger("change"),$("#household-create-form #dialect_select2").empty().append($("<option/>").val(e.dialect).text(e.dialect)).trigger("change"),$("#household-create-form #ip_group_select2").empty().append($("<option/>").val(e.ipGroup).text(e.ipGroup)).trigger("change"),$("#household-create-form #voter_group_select2").empty().append($("<option/>").val(e.voterGroup).text(e.voterGroup)).trigger("change"),$("#household-create-form #other_position_select2").empty().append($("<option/>").val(e.position).text(e.position)).trigger("change"),a.setState({form:n})});var o=a.state.form;o.data.proVoterId=null,o.data.voterId=null,o.data.cellphone="",o.data.gender="",o.data.remarks="",a.setState({form:o})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFormCheckProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.setState({form:e})},closeNewVoterCreateModal:function(){this.setState({showNewVoterCreateModal:!1})},openNewVoterCreateModal:function(){console.log("opening modal"),this.setState({showNewVoterCreateModal:!0})},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=t.props.proId,a.electId=t.props.electId,a.voterGroup=$("#household-create-form #voter_group_select2").val(),a.position=$("#household-create-form #other_position_select2").val(),t.requestPost=$.ajax({url:Routing.generate("ajax_post_household_header"),data:a,type:"POST"}).done(function(e){t.reset(),t.props.reload(),t.props.onHide(),t.props.onSuccess(e.id),t.notify("New household has been created.","teal")}).fail(function(e){t.setErrors(e.responseJSON),t.notify("Validation failed !","ruby")})}});window.HouseholdCreateModal=HouseholdCreateModal;var HouseholdDatatable=React.createClass({displayName:"HouseholdDatatable",getInitialState:function(){return{showCreateModal:!1,showEditModal:!1,showRecruitsModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,user:null,filters:{electId:3,provinceCode:53,proId:3}}},componentDidMount:function(){this.loadUser(window.userId),this.initSelect2()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initSelect2:function(){var e=this;$("#handler_component #election_select2").select2({casesentitive:!1,placeholder:"Select Election...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_elections"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.elect_id,text:e.elect_name}})}}}}),$("#handler_component #project_select2").select2({casesentitive:!1,placeholder:"Select Project...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_projects"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.pro_id,text:e.pro_name}})}}}}),$("#handler_component #province_select2").select2({casesentitive:!1,placeholder:"Enter Province...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province_strict"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#handler_component #election_select2").on("change",function(){var t=e.state.filters;t.electId=$(this).val(),e.setState({filters:t},e.reload)}),$("#handler_component #project_select2").on("change",function(){var t=e.state.filters;t.proId=$(this).val(),e.setState({filters:t},e.reload)}),$("#handler_component #province_select2").on("change",function(){var t=e.state.filters;t.provinceCode=$(this).val(),e.setState({filters:t},e.reload)})},reinitSelect2:function(){var e=this;if(!e.isEmpty(e.state.user.project)){var t=e.state.user.project.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){$("#handler_component #province_select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")}),e.requestProject=$.ajax({url:Routing.generate("ajax_get_project",{proId:e.state.user.project.proId}),type:"GET"}).done(function(t){$("#handler_component #project_select2").empty().append($("<option/>").val(t.proId).text(t.proName)).trigger("change"),e.initDatatable()})}e.requestActiveElection=$.ajax({url:Routing.generate("ajax_get_active_election"),type:"GET"}).done(function(e){$("#handler_component #election_select2").empty().append($("<option/>").val(e.electId).text(e.electName)).trigger("change")}),e.state.user.isAdmin||($("#handler_component #election_select2").attr("disabled","disabled"),$("#handler_component #province_select2").attr("disabled","disabled"),$("#handler_component #project_select2").attr("disabled","disabled"))},initDatatable:function(){var e=this,t=(new Datatable,$("#household_table")),a=new Datatable,o=Routing.generate("ajax_get_datatable_household_header",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:o,type:"GET",data:function(t){t.voterName=$('#household_table input[name="voter_name"]').val(),t.municipalityName=$('#household_table input[name="municipality_name"]').val(),t.barangayName=$('#household_table input[name="barangay_name"]').val(),t.electId=e.state.filters.electId}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5]},{className:"align-center",targets:[2,3]}],order:[[1,"asc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,o){return o.settings._iDisplayStart+o.row+1}},{data:"voter_name"},{data:"municipality_name",className:"text-center",width:150},{data:"barangay_name",width:220},{data:"total_members",className:"text-center",width:50},{width:90,className:"text-center",render:function(e,t,a){return"<a href='javascript:void(0);' class='btn btn-xs font-white bg-primary edit-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-edit'></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-green recruits-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-calendar'></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-red-sunglo delete-button' data-toggle='tooltip' data-title='Delete'><i class='fa fa-trash' ></i></a>"}}]}}),t.on("click",".edit-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showEditModal:!0,target:t.id})}),t.on("click",".recruits-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showRecruitsModal:!0,target:t.id})}),t.on("click",".delete-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.id)}),e.grid=a},openCreateModal:function(){this.setState({showCreateModal:!0})},closeCreateModal:function(){this.setState({showCreateModal:!1,target:null})},openEditModal:function(){this.setState({showEditModal:!0})},closeEditModal:function(){this.setState({showEditModal:!1,target:null})},closeRecruitsModal:function(){this.setState({showRecruitsModal:!1,target:null})},delete:function(e){var t=this;confirm("Are you sure you want to delete this record ?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_household_header",{householdId:e}),type:"DELETE"}).done(function(e){t.reload()}))},onCreateSuccess:function(e){this.setState({showRecruitsModal:!0,target:e})},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){null!=this.grid&&this.grid.getDataTable().ajax.reload()},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},render:function(){return React.createElement("div",null,this.state.showCreateModal&&React.createElement(HouseholdCreateModal,{proId:this.state.filters.proId,electId:this.state.filters.electId,provinceCode:this.state.filters.provinceCode,show:this.state.showCreateModal,notify:this.props.notify,reload:this.reload,onHide:this.closeCreateModal,onSuccess:this.onCreateSuccess}),this.state.showEditModal&&React.createElement(HouseholdEditModal,{proId:this.state.filters.proId,electId:this.state.filters.electId,provinceCode:this.state.filters.provinceCode,show:this.state.showEditModal,notify:this.props.notify,reload:this.reload,onHide:this.closeEditModal,householdId:this.state.target}),this.state.showRecruitsModal&&React.createElement(HouseholdMemberModal,{id:this.state.target,show:this.state.showRecruitsModal,reload:this.reload,onHide:this.closeRecruitsModal,proId:this.state.filters.proId,electId:this.state.filters.electId}),React.createElement("div",{className:"row",id:"handler_component"},React.createElement("div",{className:"col-md-5"},React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.openCreateModal},"New Household")),React.createElement("div",{className:"col-md-7"},React.createElement("form",{onSubmit:this.onApplyCode},React.createElement("div",{className:"col-md-3 col-md-offset-1"},React.createElement("select",{id:"election_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"province_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"project_select2",className:"form-control form-filter input-sm"}))))),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"household_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Household Leader"),React.createElement("th",{className:"text-center"},"Municipality"),React.createElement("th",{className:"text-center"},"Barangay"),React.createElement("th",{className:"text-center"},"Total Members"),React.createElement("th",{width:"60px",className:"text-center"})),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voter_name",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"municipality_name",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangay_name",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.HouseholdDatatable=HouseholdDatatable;var HouseholdComponent=React.createClass({displayName:"HouseholdComponent",notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},render:function(){return React.createElement("div",{className:"portlet light portlet-fit bordered"},React.createElement("div",{className:"portlet-body"},React.createElement(HouseholdDatatable,null)))}});setTimeout(function(){ReactDOM.render(React.createElement(HouseholdComponent,null),document.getElementById("page-container"))},500);